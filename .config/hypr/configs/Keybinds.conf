#  ▗▖ ▗▖▗▄▄▄▖▗▖  ▗▖▗▄▄▖ ▗▄▄▄▖▗▖  ▗▖▗▄▄▄ ▗▄▄▄▖▗▖  ▗▖ ▗▄▄▖ ▗▄▄▖
#  ▐▌▗▞▘▐▌    ▝▚▞▘ ▐▌ ▐▌  █  ▐▛▚▖▐▌▐▌  █  █  ▐▛▚▖▐▌▐▌   ▐▌   
#  ▐▛▚▖ ▐▛▀▀▘  ▐▌  ▐▛▀▚▖  █  ▐▌ ▝▜▌▐▌  █  █  ▐▌ ▝▜▌▐▌▝▜▌ ▝▀▚▖
#  ▐▌ ▐▌▐▙▄▄▖  ▐▌  ▐▙▄▞▘▗▄█▄▖▐▌  ▐▌▐▙▄▄▀▗▄█▄▖▐▌  ▐▌▝▚▄▞▘▗▄▄▞▘


# ---------------- App-Specific Rules ----------------

$mainMod = SUPER
$files_main = dolphin
$files_sec = thunar
$browser = brave
$termPri = foot
$termSec = kitty
$scriptsDir = $HOME/.config/hypr/scripts

# Scripts Variables
$AirplaneMode = $scriptsDir/AirplaneMode.sh
$Media = $scriptsDir/MediaCtrl.sh
$screenshot = $scriptsDir/ScreenShot.sh
$volume = $scriptsDir/Volume.sh
$noti_icon = $HOME/.config/swaync/assets

# Misc
$ani-cli-cmd = ani-cli-mpv

# ---------------- System Controls ----------------

# Power
bindd = , xf86poweroff, Suspend System, exec, systemctl suspend
bindd = CTRL ALT, Delete, Exit Hyprland, exec, hyprctl dispatch exit 0
bindd = CTRL ALT, P, Power Menu, exec, $scriptsDir/RofiPower.sh
bindd = , xf86mail, Power Menu Alt, exec, $scriptsDir/RofiPower.sh # f12
bindd = CTRL ALT, L, Lock Screen, exec, $scriptsDir/LockScreen.sh
bindd = , xf86Sleep, Sleep Lock, exec, $LockScreen #FN+F11 (sleep button)

# Hyprland
bindd = $mainMod SHIFT, C, Reload Config, exec, hyprctl reload
bindd = $mainMod SHIFT, Q, Kill Window, exec, hyprctl kill
bindd = $mainMod, Escape, Kill Window Alt, exec, hyprctl kill

# Wayland
bindd = CTRL SHIFT, W, Refresh Wayland, exec, $scriptsDir/Refresh.sh
bindd = CTRL ALT, W, Refresh with Waybar, exec, $scriptsDir/Refresh_with_waybar.sh
bindd = CTRL, W, Waybar Styles, exec, $scriptsDir/WaybarStyles.sh
bindd = $mainMod, W, Waypaper, exec, pkill waypaper || true && waypaper
bindd = $mainMod SHIFT, W, Wallpaper Select, exec, $scriptsDir/WallpaperSelect.sh
bindd = ALT, W, Waybar Layout, exec, $scriptsDir/WaybarLayout.sh

# ---------------- App Launchers ----------------

# Rofi
binddr = $mainMod, $mainMod_L, App Launcher, exec, pkill rofi || rofi -matching fuzzy -show drun -modi drun,filebrowser,run,window
bindd = $mainMod, E, Google Search, exec, $scriptsDir/RofiSearch.sh # Google search from Rofi
bindd = $mainMod CTRL, S, Lofi Beats, exec, $scriptsDir/RofiBeats.sh
bindd = $mainMod ALT, E, Emoji Picker, exec, $scriptsDir/RofiEmoji.sh
bindd = $mainMod, H, Key Hints, exec, $scriptsDir/KeyHints.sh

# Apps
bindd = $mainMod, Return, Primary Terminal, exec, $termPri
bindd = $mainMod SHIFT, Return, Secondary Terminal, exec, $termSec
bindd = $mainMod, D, Dolphin File Manager, exec, $files_main
bindd = $mainMod, T, Thunar File Manager, exec, $files_sec
bindd = $mainMod, B, Browser, exec, $browser
bindd = , xf86calculator, Calculator, exec, qalculate-qt #f3

# Ani-cli
bindd = , xf86explorer, Ani-cli Dub, exec, $ani-cli-cmd -q 1080p --dub --rofi #f1
bindd = , xf86homepage, Ani-cli Sub, exec, $ani-cli-cmd -q 1080p --rofi #f2
bindd = , xf86tools, Ani-cli Continue, exec, $ani-cli-cmd -c --rofi #f4

# ---------------- Window Management ----------------

# Window States
bindd = $mainMod SHIFT, F, Toggle Float, togglefloating,
bindd = $mainMod ALT, F, All Float, exec, hyprctl dispatch workspaceopt allfloat
bindd = $mainMod, F, Fullscreen, fullscreen
bindd = $mainMod, Q, Close Window, killactive,
bindd = $mainMod, P, Pin Window, pin,

# Layout
bindd = $mainMod CTRL, D, Remove Master, layoutmsg, removemaster
bindd = $mainMod, X, Maximize, fullscreen, 1
bindd = $mainMod, F11, Fullscreen Toggle, fullscreenstate, -1 2
bindd = $mainMod, I, Add Master, layoutmsg, addmaster
bindd = $mainMod, J, Cycle Next, layoutmsg, cyclenext
bindd = $mainMod, K, Cycle Previous, layoutmsg, cycleprev
bindd = $mainMod, M, Split Ratio 0.3, exec, hyprctl dispatch splitratio 0.3
bindd = $mainMod, P, Pseudo Tiling, pseudo, # dwindle
bindd = $mainMod CTRL, Return, Swap with Master, layoutmsg, swapwithmaster
bindd = $mainMod SHIFT, M, Split Ratio -0.3, exec, hyprctl dispatch splitratio -0.3
bindd = $mainMod, Space, Change Layout, exec, $scriptsDir/ChangeLayout.sh

# Grouping
bindd = $mainMod, G, Toggle Group, togglegroup # toggle group
bindd = $mainMod CTRL, tab, Change Group Focus, changegroupactive  # change focus to another window
bindd = $mainMod CTRL, R, Move Out of Group, moveoutofgroup  # change focus to another window

# Resize
binded = $mainMod SHIFT, left, Resize Width -, resizeactive,-50 0
binded = $mainMod SHIFT, right, Resize Width +, resizeactive,50 0
binded = $mainMod SHIFT, up, Resize Height -, resizeactive,0 -50
binded = $mainMod SHIFT, down, Resize Height +, resizeactive,0 50

# Move/Resize with Mouse
binddm = $mainMod, mouse:272, Move Window, movewindow
binddm = $mainMod, mouse:273, Resize Window, resizewindow

# ---------------- Workspace Management ----------------

# Special Workspace
bindd = $mainMod SHIFT, U, Move to Special, movetoworkspace, special
bindd = $mainMod, U, Toggle Special, togglespecialworkspace,

# Switch Workspaces
bindd = $mainMod, 1, Workspace 1, workspace, 1
bindd = $mainMod, 2, Workspace 2, workspace, 2
bindd = $mainMod, 3, Workspace 3, workspace, 3
bindd = $mainMod, 4, Workspace 4, workspace, 4
bindd = $mainMod, 5, Workspace 5, workspace, 5
bindd = $mainMod, 6, Workspace 6, workspace, 6
bindd = $mainMod, 7, Workspace 7, workspace, 7
bindd = $mainMod, 8, Workspace 8, workspace, 8
bindd = $mainMod, 9, Workspace 9, workspace, 9
bindd = $mainMod, 0, Workspace 10, workspace, 10
bindd = $mainMod, mouse_down, Next Workspace, workspace, e+1
bindd = $mainMod, mouse_up, Previous Workspace, workspace, e-1
bindd = $mainMod, period, Next Workspace Alt, workspace, e+1
bindd = $mainMod, comma, Prev Workspace Alt, workspace, e-1

# Move to Workspaces
bindd = $mainMod CTRL, 1, Move to WS 1, movetoworkspace, 1
bindd = $mainMod CTRL, 2, Move to WS 2, movetoworkspace, 2
bindd = $mainMod CTRL, 3, Move to WS 3, movetoworkspace, 3
bindd = $mainMod CTRL, 4, Move to WS 4, movetoworkspace, 4
bindd = $mainMod CTRL, 5, Move to WS 5, movetoworkspace, 5
bindd = $mainMod CTRL, 6, Move to WS 6, movetoworkspace, 6
bindd = $mainMod CTRL, 7, Move to WS 7, movetoworkspace, 7
bindd = $mainMod CTRL, 8, Move to WS 8, movetoworkspace, 8
bindd = $mainMod CTRL, 9, Move to WS 9, movetoworkspace, 9
bindd = $mainMod CTRL, 0, Move to WS 10, movetoworkspace, 10
bindd = $mainMod CTRL, bracketleft, Move to Prev WS, movetoworkspace, -1
bindd = $mainMod CTRL, bracketright, Move to Next WS, movetoworkspace, +1

# Move to Workspaces (Silent)
bindd = $mainMod SHIFT, 1, Move Silent WS 1, movetoworkspacesilent, 1
bindd = $mainMod SHIFT, 2, Move Silent WS 2, movetoworkspacesilent, 2
bindd = $mainMod SHIFT, 3, Move Silent WS 3, movetoworkspacesilent, 3
bindd = $mainMod SHIFT, 4, Move Silent WS 4, movetoworkspacesilent, 4
bindd = $mainMod SHIFT, 5, Move Silent WS 5, movetoworkspacesilent, 5
bindd = $mainMod SHIFT, 6, Move Silent WS 6, movetoworkspacesilent, 6
bindd = $mainMod SHIFT, 7, Move Silent WS 7, movetoworkspacesilent, 7
bindd = $mainMod SHIFT, 8, Move Silent WS 8, movetoworkspacesilent, 8
bindd = $mainMod SHIFT, 9, Move Silent WS 9, movetoworkspacesilent, 9
bindd = $mainMod SHIFT, 0, Move Silent WS 10, movetoworkspacesilent, 10
bindd = $mainMod SHIFT, bracketleft, Move Silent Prev, movetoworkspacesilent, -1
bindd = $mainMod SHIFT, bracketright, Move Silent Next, movetoworkspacesilent, +1

# Razer mouse
bindd = , mouse:275, Prev WS Mouse, workspace, e-1
bindd = , mouse:276, Next WS Mouse, workspace, e+1

# ---------------- Multimedia Controls ----------------

# Volume
bindd = , xf86audioraisevolume, Volume Up, exec, $volume --inc
bindd = , xf86audiolowervolume, Volume Down, exec, $volume --dec
bindd = , xf86AudioMicMute, Toggle Mic, exec, $volume --toggle-mic
bindd = , xf86audiomute, Toggle Mute, exec, $volume --toggle #FN+F1

# Brightness
bindd = , XF86MonBrightnessUp, Brightness Up, exec, ~/.config/hypr/scripts/Brightness.sh --inc
bindd = , XF86MonBrightnessDown, Brightness Down, exec, ~/.config/hypr/scripts/Brightness.sh --dec
bindd = , SCROLL_LOCK, Brightness Down Alt, exec, ~/.config/hypr/scripts/Brightness.sh --dec
bindd = , PAUSE, Brightness Up Alt, exec, ~/.config/hypr/scripts/Brightness.sh --inc
bindd = CTRL , xf86audioraisevolume, Brightness Up Ctrl, exec, ~/.config/hypr/scripts/Brightness.sh --inc
bindd = CTRL , xf86audiolowervolume, Brightness Down Ctrl, exec, ~/.config/hypr/scripts/Brightness.sh --dec

# Media
bindd = , xf86AudioPlayPause, Play Pause, exec, $Media --pause
bindd = , xf86AudioPause, Pause, exec, $Media --pause
bindd = , xf86AudioPlay, Play, exec, $Media --pause
bindd = , xf86AudioNext, Next Track, exec, $Media --nxt
bindd = , xf86AudioPrev, Previous Track, exec, $Media --prv
bindd = , xf86audiostop, Stop Media, exec, $Media --stop

# Hyprsunset controls
bindd = ALT, xf86audioraisevolume, Warmer Screen, exec, hyprctl hyprsunset temperature +400
bindd = ALT, xf86audiolowervolume, Cooler Screen, exec, hyprctl hyprsunset temperature -400
bindd = ALT, xf86audiomute, Toggle Night Light, exec, hyprctl hyprsunset temperature $([ $(hyprctl hyprsunset temperature) = 6500 ] && echo 3500 || echo 6500)

# ---------------- Screenshot ----------------

bindd = , Print, Screenshot Now, exec, $screenshot --now
bindd = ALT, Print, Screenshot Hush, exec, $screenshot --hush
bindd = $mainMod CTRL, Print, Screenshot 5s, exec, $screenshot --in5
bindd = $mainMod ALT, Print, Screenshot 10s, exec, $screenshot --in10
bindd = CTRL, Print, Screenshot Window, exec, $screenshot --win
bindd = SHIFT, Print, Screenshot Area, exec, $screenshot --area
bindd = $mainMod SHIFT, Print, Screenshot Area Alt, exec, $screenshot --area
# bindd = $mainMod SHIFT, S, Satty Screenshot, exec, grim -g "$(slurp && sleep 0.1)" - | satty -f - #swappy -f -
# bindd = $mainMod SHIFT, S, Satty with Delay, exec, grim -g "$(slurp && sleep 0.5)" -t ppm - | satty -f -  --output-filename ~/Pictures/Screenshots/satty-$(date '+%Y-%m-%d_%H%M%S').png
bindd = $mainMod SHIFT, S, Satty Annotate, exec, grim -g "$(slurp)" -t ppm - | satty -f -  --output-filename ~/Pictures/Screenshots/satty-$(date '+%Y-%m-%d_%H%M%S').png

# ---------------- Misc ----------------

# Dropdown terminal
$drop_down_cmd="foot -e zellij attach --create scratchpad"
bindd = $mainMod, S, Dropdown Terminal, exec,$scriptsDir/Dropterminal_adv.sh $drop_down_cmd # Dropdown terminal
bindd = , Insert, Dropdown Terminal Alt, exec,$scriptsDir/Dropterminal_adv.sh $drop_down_cmd # Dropdown terminal
# bindd = $mainMod SHIFT, K, Kew Player, exec,pypr toggle kew_player

# Overview
# bindd = $mainMod, tab, AGS Overview, exec, ags -t 'overview'
# bindd = $mainMod, tab, Python Overview, exec, pkill -f ~/.config/scripts/overview.py || ~/.venv/bin/python ~/.config/scripts/overview.py
bindd = $mainMod, Tab, Toggle Overview, global, quickshell:overviewToggle

# Clip Manager
bindd = $mainMod, V, Clipboard Manager, exec, $scriptsDir/ClipManager.sh

# System
bindd = , xf86Rfkill, Airplane Mode, exec, $AirplaneMode #Airplane mode FN+F12

# Window Effects
bindd = $mainMod SHIFT, B, Toggle Blur, exec, $scriptsDir/ChangeBlur.sh # Toggle blur settings
bindd = $mainMod SHIFT, G, Game Mode, exec, $scriptsDir/GameMode.sh
bindd = $mainMod, L, Hyprshade, exec, $scriptsDir/hyprshade.sh

# Window Opacity
bindd = $mainMod ALT, O, Toggle Opacity, exec, hyprctl setprop active opaque toggle # disable opacity on active window

# Cursor Zoom
bindd = $mainMod CTRL, mouse_down, Zoom Out, exec, hyprctl keyword cursor:zoom_factor $(awk "BEGIN {print $(hyprctl getoption cursor:zoom_factor | grep 'float:' | awk '{print $2}') + 0.7}") # Zoom out
bindd = $mainMod CTRL, mouse_up, Zoom In, exec, hyprctl keyword cursor:zoom_factor $(awk "BEGIN {print $(hyprctl getoption cursor:zoom_factor | grep 'float:' | awk '{print $2}') - 0.7}") # Zoom in

# HyprTasking
# bindd = $mainMod, I, Expo Toggle, hyprexpo:expo, toggle
# bindd = $mainMod, I, Tasking Toggle, hyprtasking:toggle, cursor
# bindd = $mainMod, left, Tasking Left, hyprtasking:move, left
# bindd = $mainMod, down, Tasking Down, hyprtasking:move, down
# bindd = $mainMod, up, Tasking Up, hyprtasking:move, up
# bindd = $mainMod, right, Tasking Right, hyprtasking:move, right

# YTDL-MPV
bindd = $mainMod, Y, YTDL MPV, exec, ytdl-mpv

# MPV from clipboard
bindd = $mainMod ALT, M, MPV Clipboard, exec, notify-send -t 3000 -i ~/.config/swaync/assets/play-circle.png "MPV" "Loading video..." && mpv "$(wl-paste)"

# Swaync
bindd = $mainMod, N, Notification Center, exec, swaync-client -t -sw

# Window Cycle
bindd = ALT, tab, Cycle Windows, cyclenext
bindd = ALT, tab, Bring to Top, bringactivetotop

# Search Keybinds
bindd = $mainMod, K, Search Keybinds, exec, $scriptsDir/Key-bind.sh # search keybinds via rofi

# VM Passthrough
bindd = $mainMod ALT, P, Enable Passthrough, submap, passthru
submap = passthru
#to unbind
bindd = $mainMod Escape, P, Disable Passthrough, submap, reset
submap = reset

# Mouse scroll tilt back and forward
bindd = , mouse_left, Scroll Tilt Left, exec, wtype -M alt -k left -m alt
bindd = , mouse_right, Scroll Tilt Right, exec, wtype -M alt -k right -m alt

# OCR (Tesseract)
# bindd = $mainMod, O, OCR Selection, exec, slurp | grim -g - - | tesseract stdin stdout -l eng | wl-copy
bindd = $mainMod, O, OCR Selection, exec, sh -c 'text=$(slurp | grim -g - - | tesseract stdin stdout -l eng); printf "%s" "$text" | wl-copy; notify-send -i "$noti_icon/clipboard.png" "Text Copied" "$text"'
# bindd = $mainMod SHIFT, O, OCR Fullscreen, exec, grim - | tesseract stdin stdout -l eng | wl-copy
bindd = $mainMod SHIFT, O, OCR Fullscreen, exec, sh -c 'text=$(grim - | tesseract stdin stdout -l eng); printf "%s" "$text" | wl-copy; notify-send -i "$noti_icon/clipboard.png" "Text Copied" "$text"'
